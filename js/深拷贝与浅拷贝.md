---
title: 深拷贝与浅拷贝
---

![深拷贝与浅拷贝](https://user-gold-cdn.xitu.io/2017/9/3/998e84124743f57f2f7e4005773baa0c?imageslim)

## 堆和栈的区别
其实深拷贝和浅拷贝的主要区别就是其在内存中的存储类型不同。

堆和栈都是内存中划分出来用来存储的区域。

>栈（stack）为自动分配的内存空间，它由系统自动释放；而堆（heap）则是动态分配的内存，大小不定也不会自动释放。

## 基本数据类型
基本数据类型主要是：undefined，boolean，number，string，null。

**基本数据类型存放在栈中**

存放在栈内存中的简单数据段，数据大小确定，内存空间大小可以分配，是直接按值存放的，所以可以直接访问。

**基本数据类型值不可变**

基本数据类型的值是不可变的，动态修改了基本数据类型的值，它的原始值也是不会改变的，例如

```js?linenums
    var str = "abc";

    console.log(str[1]="f");    // f

    console.log(str);           // abc
```

**基本类型的比较是值的比较**

基本类型的比较是值的比较，只要它们的值相等就认为他们是相等的，例如：

```js?linenums
 	 var a = 1;
    var b = 1;
    console.log(a === b);//true
```

比较的时候最好使用严格等，因为 == 是会进行类型转换的，比如：

```js?linenums
	var a = 1;
    var b = true;
    console.log(a == b);//true
```

## 引用类型

**引用类型存放在堆中**

引用类型（object）是存放在堆内存中的，变量实际上是一个存放在栈内存的指针，这个指针指向堆内存中的地址。每个空间大小不一样，要根据情况开进行特定的分配，例如。

```js?linenums
var person1 = {name:'jozo'};
var person2 = {name:'xiaom'};
var person3 = {name:'xiaoq'};
```
![堆内存](https://user-gold-cdn.xitu.io/2017/9/3/6fb2c3d13d830efc6ae07ac368df0816?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

**引用类型值可变**

引用类型是可以直接改变其值的，例如：

```js?linenums
    var a = [1,2,3];
    a[1] = 5;
    console.log(a[1]); // 5
```