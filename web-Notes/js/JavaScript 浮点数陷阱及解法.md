---
title: JavaScript 浮点数陷阱及解法
---

原文地址：[https://zhuanlan.zhihu.com/p/30703042](https://zhuanlan.zhihu.com/p/30703042)

>JavaScript 浮点数运算时经常遇到会 0.000000001 和 0.999999999 这样奇怪的结果，如 0.1+0.2=0.30000000000000004、1-0.9=0.09999999999999998，很多人知道这是浮点数误差问题，但具体原因就说不清楚了。

## 一、浮点数的存储

首先要搞清楚 JavaScript 如何存储小数。和其它语言如 Java 和 Python 不同，JavaScript 中所有数字包括整数和小数都只有一种类型 — Number。它的实现遵循 IEEE 754 标准，使用 64 位固定长度来表示，也就是标准的 double 双精度浮点数（相关的还有float 32位单精度）。计算机组成原理中有过详细介绍，这里就不多介绍了。

计算机 只认识 0 和 1，计算机 是先转为 二进制 后 再 计算 ，计算完成后 再转为 十进制。


例如：

* 为什么 0.1+0.2=0.30000000000000004？

  ```js
    // 0.1 和 0.2 都转化成二进制后再进行运算
	0.00011001100110011001100110011001100110011001100110011010 +
	0.0011001100110011001100110011001100110011001100110011010 =
	0.0100110011001100110011001100110011001100110011001100111
	// 转成十进制正好是 0.30000000000000004
  ```